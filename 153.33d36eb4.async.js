!(function(){"use strict";var U=Object.defineProperty;var J=l=>{throw TypeError(l)};var X=(l,a,f)=>a in l?U(l,a,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[a]=f;var F=(l,a,f)=>X(l,typeof a!="symbol"?a+"":a,f),V=(l,a,f)=>a.has(l)||J("Cannot "+f);var e=(l,a,f)=>(V(l,a,"read from private field"),f?f.call(l):a.get(l)),y=(l,a,f)=>a.has(l)?J("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(l):a.set(l,f),u=(l,a,f,_)=>(V(l,a,"write to private field"),_?_.call(l,f):a.set(l,f),f),g=(l,a,f)=>(V(l,a,"access private method"),f);(self.webpackChunkreact_book_reader_docs=self.webpackChunkreact_book_reader_docs||[]).push([[153],{83153:function(l,a,f){var T,$,k,O,M,S,v,b,E,C,h,B,A,Z,q,H,D;f.r(a),f.d(a,{FixedLayout:function(){return L}});const _=j=>j?.split(/[,;\s]/)?.filter(x=>x)?.map(x=>x.split("=").map(t=>t.trim())),K=(j,x)=>{if(j.documentElement.localName==="svg"){const[,,i,o]=j.documentElement.getAttribute("viewBox")?.split(/\s/)??[];return{width:i,height:o}}const t=_(j.querySelector('meta[name="viewport"]')?.getAttribute("content"));if(t)return Object.fromEntries(t);if(typeof x=="string")return _(x);if(x?.width&&x.height)return x;const s=j.querySelector("img");return s?{width:s.naturalWidth,height:s.naturalHeight}:(console.warn(new Error("Missing viewport properties")),{width:1e3,height:2e3})};class L extends HTMLElement{constructor(){super();y(this,h);y(this,T,this.attachShadow({mode:"closed"}));y(this,$,new ResizeObserver(()=>g(this,h,A).call(this)));y(this,k);y(this,O,-1);F(this,"defaultViewport");F(this,"spread");y(this,M,!1);y(this,S);y(this,v);y(this,b);y(this,E);y(this,C);const t=new CSSStyleSheet;e(this,T).adoptedStyleSheets=[t],t.replaceSync(`:host {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: auto;
        }`),e(this,$).observe(this)}attributeChangedCallback(t,s,i){t==="zoom"&&(u(this,C,i!=="fit-width"&&i!=="fit-page"?parseFloat(i):i),g(this,h,A).call(this))}open(t){this.book=t;const{rendition:s}=t;this.spread=s?.spread,this.defaultViewport=s?.viewport;const i=t.dir==="rtl",o=!i;this.rtl=i,s?.spread==="none"?u(this,k,t.sections.map(c=>({center:c}))):u(this,k,t.sections.reduce((c,r,d)=>{const n=c[c.length-1],{pageSpread:w}=r,p=()=>{const m={};return c.push(m),m};if(w==="center"){const m=n.left||n.right?p():n;m.center=r}else if(w==="left"){const m=n.center||n.left||o&&d?p():n;m.left=r}else if(w==="right"){const m=n.center||n.right||i&&d?p():n;m.right=r}else o?n.center||n.right?p().left=r:n.left||!d?n.right=r:n.left=r:n.center||n.left?p().right=r:n.right||!d?n.left=r:n.right=r;return c},[{}]))}get index(){const t=e(this,k)[e(this,O)],s=t?.center??(e(this,E)==="left"?t.left??t.right:t.right??t.left);return this.book.sections.indexOf(s)}getSpreadOf(t){const s=e(this,k);for(let i=0;i<s.length;i++){const{left:o,right:c,center:r}=s[i];if(o===t)return{index:i,side:"left"};if(c===t)return{index:i,side:"right"};if(r===t)return{index:i,side:"center"}}}async goToSpread(t,s,i){if(t<0||t>e(this,k).length-1)return;if(t===e(this,O)){g(this,h,A).call(this,s);return}u(this,O,t);const o=e(this,k)[t];if(o.center){const c=this.book.sections.indexOf(o.center),r=await o.center?.load?.();await g(this,h,Z).call(this,{center:{index:c,src:r}})}else{const c=this.book.sections.indexOf(o.left),r=this.book.sections.indexOf(o.right),d=await o.left?.load?.(),n=await o.right?.load?.(),w={index:c,src:d},p={index:r,src:n};await g(this,h,Z).call(this,{left:w,right:p,side:s})}g(this,h,D).call(this,i)}async select(t){await this.goTo(t)}async goTo(t){const{book:s}=this,i=await t,o=s.sections[i.index];if(!o)return;const{index:c,side:r}=this.getSpreadOf(o);await this.goToSpread(c,r)}async next(){if(!(this.rtl?g(this,h,q).call(this):g(this,h,H).call(this)))return this.goToSpread(e(this,O)+1,this.rtl?"right":"left","page")}async prev(){if(!(this.rtl?g(this,h,H).call(this):g(this,h,q).call(this)))return this.goToSpread(e(this,O)-1,this.rtl?"left":"right","page")}getContents(){return Array.from(e(this,T).querySelectorAll("iframe"),t=>({doc:t.contentDocument}))}destroy(){e(this,$).unobserve(this)}}T=new WeakMap,$=new WeakMap,k=new WeakMap,O=new WeakMap,M=new WeakMap,S=new WeakMap,v=new WeakMap,b=new WeakMap,E=new WeakMap,C=new WeakMap,h=new WeakSet,B=async function({index:t,src:s}){const i=typeof s=="string",o=i?s:s?.src,c=i?null:s?.onZoom,r=document.createElement("div");r.setAttribute("dir","ltr");const d=document.createElement("iframe");return r.append(d),Object.assign(d.style,{border:"0",display:"none",overflow:"hidden"}),d.setAttribute("sandbox","allow-same-origin allow-scripts"),d.setAttribute("scrolling","no"),d.setAttribute("part","filter"),e(this,T).append(r),o?new Promise(n=>{d.addEventListener("load",()=>{const w=d.contentDocument;this.dispatchEvent(new CustomEvent("load",{detail:{doc:w,index:t}}));const{width:p,height:m}=K(w,this.defaultViewport);n({element:r,iframe:d,width:parseFloat(p),height:parseFloat(m),onZoom:c})},{once:!0}),d.src=o}):{blank:!0,element:r,iframe:d}},A=function(t=e(this,E)){if(!t)return;const s=e(this,S)??{},i=e(this,b)??e(this,v)??{},o=t==="left"?s:i,{width:c,height:r}=this.getBoundingClientRect(),d=this.spread!=="both"&&this.spread!=="portrait"&&r>c;u(this,M,d);const n=s.width??i.width??0,w=s.height??i.height??0,p=typeof e(this,C)=="number"&&!isNaN(e(this,C))?e(this,C):(e(this,C)==="fit-width"?d||e(this,b)?c/(o.width??n):c/((s.width??n)+(i.width??n)):d||e(this,b)?Math.min(c/(o.width??n),r/(o.height??w)):Math.min(c/((s.width??n)+(i.width??n)),r/Math.max(s.height??w,i.height??w)))||1,m=N=>{let{element:R,iframe:P,width:W,height:G,blank:Q,onZoom:z}=N;if(!P)return;z&&z({doc:N.iframe.contentDocument,scale:p});const I=z?p:1;Object.assign(P.style,{width:`${W*I}px`,height:`${G*I}px`,transform:z?"none":`scale(${p})`,transformOrigin:"top left",display:Q?"none":"block"}),Object.assign(R.style,{width:`${(W??n)*p}px`,height:`${(G??w)*p}px`,overflow:"hidden",display:"block",flexShrink:"0",marginBlock:"auto"}),d&&N!==o&&(R.style.display="none")};e(this,b)?m(e(this,b)):(m(s),m(i))},Z=async function({left:t,right:s,center:i,side:o}){e(this,T).replaceChildren(),u(this,S,null),u(this,v,null),u(this,b,null),i?(u(this,b,await g(this,h,B).call(this,i)),u(this,E,"center"),g(this,h,A).call(this)):(u(this,S,await g(this,h,B).call(this,t)),u(this,v,await g(this,h,B).call(this,s)),u(this,E,e(this,S).blank?"right":e(this,v).blank?"left":o),g(this,h,A).call(this))},q=function(){if(!(e(this,b)||e(this,S)?.blank)&&e(this,M)&&e(this,S)?.element?.style?.display==="none")return u(this,E,"left"),g(this,h,A).call(this),g(this,h,D).call(this,"page"),!0},H=function(){if(!(e(this,b)||e(this,v)?.blank)&&e(this,M)&&e(this,v)?.element?.style?.display==="none")return u(this,E,"right"),g(this,h,A).call(this),g(this,h,D).call(this,"page"),!0},D=function(t){this.dispatchEvent(new CustomEvent("relocate",{detail:{reason:t,range:null,index:this.index,fraction:0,size:1}}))},F(L,"observedAttributes",["zoom"]),customElements.define("foliate-fxl",L)}}]);
}());