"use strict";(self.webpackChunkreact_book_reader_docs=self.webpackChunkreact_book_reader_docs||[]).push([[396],{16396:function(g,i,l){l.d(i,{makeComicBook:function(){return d}});const d=({entries:f,loadBlob:c,getSize:m},p)=>{const n=new Map,r=new Map,u=async e=>{if(n.has(e))return n.get(e);const o=URL.createObjectURL(await c(e)),s=URL.createObjectURL(new Blob([`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body style="margin: 0"><img src="${o}"></body></html>`],{type:"text/html"}));return r.set(e,[o,s]),n.set(e,s),s},h=e=>{r.get(e)?.forEach?.(o=>URL.revokeObjectURL(o)),r.delete(e),n.delete(e)},b=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".jxl",".avif"],a=f.map(e=>e.filename).filter(e=>b.some(o=>e.endsWith(o))).sort();if(!a.length)throw new Error("No supported image files in archive");const t={};return t.getCover=()=>c(a[0]),t.metadata={title:p.name},t.sections=a.map(e=>({id:e,load:()=>u(e),unload:()=>h(e),size:m(e)})),t.toc=a.map(e=>({label:e,href:e})),t.rendition={layout:"pre-paginated"},t.resolveHref=e=>({index:t.sections.findIndex(o=>o.id===e)}),t.splitTOCHref=e=>[e,null],t.getTOCFragment=e=>e.documentElement,t.destroy=()=>{for(const e of r.values())for(const o of e)URL.revokeObjectURL(o)},t}}}]);
